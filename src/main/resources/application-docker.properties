# Server
server.port=8081

# Database
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://auth-db:5432/auth_db}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:postgres}

# JPA
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.open-in-view=false

# Keycloak Configuration
keycloak.server.url=${KEYCLOAK_SERVER_URL:http://keycloak:8080}
keycloak.realm=${KEYCLOAK_REALM:authentication-service}
keycloak.client.id=${KEYCLOAK_CLIENT_ID:authentication-service-client}
keycloak.client.secret=${KEYCLOAK_CLIENT_SECRET:authentication-service-secret}

# OAuth2 Resource Server (Keycloak)
spring.security.oauth2.resourceserver.jwt.issuer-uri=${keycloak.server.url}/realms/${keycloak.realm}
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=${keycloak.server.url}/realms/${keycloak.realm}/protocol/openid-connect/certs

internal.api.key=${INTERNAL_API_KEY:dev-internal-api-key}

# Logging
logging.level.com.innowise.authenticationservice=INFO
logging.level.org.keycloak=INFO
logging.level.org.springframework.web=INFO
logging.level.org.hibernate=WARN

# Connection pool settings for better stability
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# OAuth2 Resource Server settings for better stability with Keycloak
spring.security.oauth2.resourceserver.jwt.jwk-set-cache-ttl=300000
spring.security.oauth2.resourceserver.jwt.jwk-set-cache-refresh=300000

spring.docker.compose.enabled=true

